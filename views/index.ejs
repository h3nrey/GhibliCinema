<!DOCTYPE html>
<html lang="en">
<%- include("./partials/head") %> 
    
<body>
    <div id="container">
        <div class="content">
            <%- include("./partials/header") %> 
            <main class="container">
                <section class="movies__section" id="movies__best">
                    <h2 class="section__legend">Best Movies</h2>

                    <%-include("./partials/carousel", {
                        starredMovies: movies.filter(function (movie) { return movie.id == "ea660b10-85c4-4ae3-8a5f-41cea3648e3e" || movie.id == "ff24da26-a969-4f0e-ba1e-a122ead6c6e3" || movie.id == "0440483e-ca0e-4120-8c50-4c8cd9b965d6" || movie.id == "dc2e6bd1-8156-4886-adff-b39e6043af0c" || movie.id == "cd3d059c-09f4-4ff3-8d63-bc765a5184fa" || movie.id == "758bf02e-3122-46e0-884e-67cf83df1786" || movie.id == "578ae244-7750-4d9f-867b-f3cd3d6fecf4"})
                    })%>
                </section>
                  
                <section class="movies__section" id="movies__hayao">
                    <h2>Hayao Miyazaki</h2>
                    <%-include("./partials/carousel", {
                        starredMovies: movies.filter(movie => movie.director == "Hayao Miyazaki")
                    })%>                 
                </section>

                <section class="movies__section" id="movies__isao">
                    <h2>Isao Takahata</h2>

                    <%-include("./partials/carousel", {
                        starredMovies: movies.filter(movie => movie.director == "Isao Takahata")
                    })%>                  
                </section>
                
                <section class="movies__section" id="movies__others">
                    <h2>Outros</h2>

                    <%-include("./partials/carousel", {
                        starredMovies: movies.filter(function (movie) { 
                            return movie.director != "Hayao Miyazaki" && movie.director != "Isao Takahata"
                        })
                    })%>                  
                </section>
                <%- include("./partials/moveDetails") %> 
            </main>
            <%- include("./partials/footer") %> 
        </div>        
    </div>

    <script src="scripts/scrooll.js"></script>
    <script src="scripts/carouselBehaviour.js"></script>
    <script src="https://kit.fontawesome.com/e9cc5f7524.js" crossorigin="anonymous"></script>
    <script name="cutting description text">
        const cardsDescriptions = document.querySelectorAll(".movie__description");
        cardsDescriptions.forEach(description => {
            const content = description.textContent.split(".");
            description.innerHTML = content[0]; 
        })
    </script>
    <script src="scripts/setupMovieDetailsModal.js"></script>
    <script>
        const closeButton = document.querySelectorAll("button.close__button");
        closeButton.forEach(button => {
            button.addEventListener("click", () => {
            const detailedModal = document.querySelectorAll(".movie__detail__container");
            const cooldown = 500;
            detailedModal.forEach(modal => {
                modal.classList.add("vanishing");
                setTimeout(() => {
                    modal.classList.add("hidden");
                    modal.cloneNode(false)
                    modal.classList.remove("vanishing");
                }, cooldown);
            })
        })
        })
    </script>

    <script>
        window.addEventListener("scroll", () => {
            const scrollY = window.scrollY;

            if(scrollY > 50) {
                const header = document.querySelector("header");
                header.style.backgroundColor = "#3A3958";
            } else if(scrollY <= 50) {
                const header = document.querySelector("header");
                header.style.backgroundColor = "transparent";
            }
        })
    </script>
</body>
</html>